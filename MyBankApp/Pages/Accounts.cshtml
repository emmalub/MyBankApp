@page
@model AccountsModel
@{
}

<div class="content">

    <div class="container">


        <form method="get" class="search-form">
            <div class="search-container">
                <i class="fa fa-search search-icon"></i>
                <input type="text" name="q" value="@Request.Query["q"]" placeholder="Search account.." class="search-input" />
            </div>
        </form>

        <div class="table-responsive">

            <table class="table table-striped custom-table">
                <thead>
                    <tr>
                        <th scope="col">
                            Id
                            <a asp-page="/Accounts"
                               asp-route-q="@Model.Q"
                               asp-route-sortColumn="AccountId"
                               asp-route-sortOrder="asc"
                               style="text-decoration:none">
                                <i class="fa-solid fa-angle-up"></i>

                            </a>
                            <a asp-page="/Accounts"
                               asp-route-q="@Model.Q"
                               asp-route-sortColumn="AccountId"
                               asp-route-sortOrder="desc"
                               style="text-decoration:none">
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                        </th>
                        <th scope="col">
                            Balance
                            <a asp-page="/Accounts"
                               asp-route-q="@Model.Q"
                               asp-route-sortColumn="Balance"
                               asp-route-sortOrder="asc"
                               style="text-decoration:none">
                                <i class="fa-solid fa-angle-up"></i>

                            </a>
                            <a asp-page="/Accounts"
                               asp-route-q="@Model.Q"
                               asp-route-sortColumn="Balance"
                               asp-route-sortOrder="desc"
                               style="text-decoration:none">
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                        </th>
                        <th scope="col">
                            Loans
                            <a asp-page="/Accounts"
                               asp-route-q="@Model.Q"
                               asp-route-sortColumn="LoansTotal"
                               asp-route-sortOrder="asc"
                               style="text-decoration:none">
                                <i class="fa-solid fa-angle-up"></i>

                            </a>
                            <a asp-page="/Accounts"
                               asp-route-q="@Model.Q"
                               asp-route-sortColumn="LoansTotal"
                               asp-route-sortOrder="desc"
                               style="text-decoration:none">
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                        </th>
                        <th scope="col">
                            Account opened
                            <a asp-page="/Accounts"
                               asp-route-q="@Model.Q"
                               asp-route-sortColumn="Created"
                               asp-route-sortOrder="asc"
                               style="text-decoration:none">
                                <i class="fa-solid fa-angle-up"></i>

                            </a>
                            <a asp-page="/Accounts"
                               asp-route-q="@Model.Q"
                               asp-route-sortColumn="Created"
                               asp-route-sortOrder="desc"
                               style="text-decoration:none">
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                        </th>
                    </tr>
                </thead>
                <tbody>

                    @foreach (var a in Model.Accounts)
                    {
                        <tr>
                            <td>@a.AccountId</td>
                            <td>@a.Balance</td>
                            <td>@a.LoansTotal</td>
                            <td>@a.Created</td>
                            <td>
                                <a asp-page="/Account" asp-route-accountId="@a.AccountId" class="custom-btn fs-5">
                                    <i class="fa-solid fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Pagination Controls -->
<div class="d-flex justify-content-center">
    @if (Model.CurrentPage > 1)
    {
        <a asp-page="/Accounts"
           asp-route-sortColumn="@Model.SortColumn"
           asp-route-sortOrder="@Model.SortOrder"
           asp-route-pageNo="@(Model.CurrentPage - 1)"
           i class="bi bi-chevron-compact-left">
            Prev
        </a>
    }

    <span class="mx-2">Page @Model.CurrentPage of @Model.TotalPages</span>

    @if (Model.CurrentPage < Model.TotalPages)
    {
        <a asp-page="/Accounts"
           asp-route-sortColumn="@Model.SortColumn"
           asp-route-sortOrder="@Model.SortOrder"
           asp-route-pageNo="@(Model.CurrentPage + 1)"
           i class="bi bi-chevron-compact-right">
            Next
        </a>
    }
</div>

